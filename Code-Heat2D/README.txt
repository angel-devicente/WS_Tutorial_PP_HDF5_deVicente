The Heat2D code is based on the code at
https://repository.prace-ri.eu/git/CodeVault/training-material/parallel-programming/MPI/tree/master/heat-equation

There are seven versions (these are described in the .pdf presentation file):
 + serial
 + mpi-v1
 + mpi-v2
 + mpi-v3
 + mpi-v4
 + mpi-v5
 + mpi-v6

Versions serial and mpi-v[1-4] produce the output in .png (PNG) files.
Verisons mpi-v[5-6] produce the output in .h5 (HDF5) files.

In order to create an MP4 movie out of the PNG files you can do, for example:
ffmpeg -framerate 7 -i heat_%04d.png -c:v libx264 -r 30 -pix_fmt yuv420p iac.mp4

The code can be run with no arguments, and then the initial temperature field
will be a disk. The initial temperature field can also be given as a file:
 + For versions serial and mpi-v[1-4] this input file has to be a (.dat) ASCII file,
 as that generated by the script create.py in the directory serial.
 + For versions mpi-v[5-6] this input file has to be a (.h5) HDF5 file, as that
 generated from a .dat file by the script dattoh5.py in the directory mpi-v5


In order to run this code in LaPalma3, there are two scripts in each version
folder:
  + lmods.sh: to load the right software before compilation
    I have tested it with the following software stack:
      + GCC 7.2.0
      + OpenMPI 3.0.1
      + HDF5 1.10.1
  + heat_submit.sh: script to submit job to LaPalma3 with Slurm

In each version directory we can do the following to compile and submit the job
to LaPalma3 (here illustrated with directory mpi-v5):

.../Code-Heat2D/mpi-v5 $ . lmods.sh
.../Code-Heat2D/mpi-v5 $ make clean ; make
.../Code-Heat2D/mpi-v5 $ sbatch heat_submit.sh

